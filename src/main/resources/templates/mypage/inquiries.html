<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
  <meta charset="UTF-8">
  <title>나의 문의내역</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>

<!-- 공통 헤더 적용 -->
<div th:replace="fragments/header :: top-utility-bar"></div>
<div th:replace="fragments/header :: navbar"></div>

<!-- 컨테이너 시작 -->
<div class="container mt-5">

  <h2 class="mb-4">💬 나의 문의내역</h2>

  <div class="list-group">
    <div class="list-group-item" th:each="inquiry : ${inquiries}">
      <!-- 제목 -->
      <strong th:text="${inquiry.title}"></strong>

      <!-- 내용 -->
      <p th:text="${inquiry.content}"></p>

      <!-- 이미지 -->
      <img th:if="${inquiry.imagePath != null}"
           th:src="${inquiry.imagePath}"
           class="img-fluid rounded mb-2"
           style="max-width: 200px;">

      <!-- 작성일 -->
      <small class="text-muted"
             th:text="${#temporals.format(inquiry.createdAt, 'yyyy-MM-dd HH:mm')}"></small>

      <!-- 관리자 답변 블록 -->
      <div class="mt-3 p-3 border rounded bg-light">
        <strong>📌 관리자 답변</strong>

        <p class="mt-2" th:if="${inquiry.answer != null}"
           th:text="${inquiry.answer}"></p>

        <p class="text-muted mt-2" th:if="${inquiry.answer == null}">
          아직 답변이 등록되지 않았습니다.
        </p>
      </div>

      <!-- 삭제 버튼 -->
      <div class="mt-3 text-end">
        <form th:action="@{/inquiry/{id}/delete(id=${inquiry.id})}" method="post">
          <button class="btn btn-sm btn-danger">삭제</button>
        </form>
      </div>

    </div>
  </div>

  <a href="/support" class="btn btn-primary mt-4">문의 작성하기</a>
  <a href="/mypage" class="btn btn-secondary mt-4">마이페이지로 돌아가기</a>

</div> <!-- container end -->

</body>
</html>
